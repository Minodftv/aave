"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4254],{35643:function(e,t,r){r.d(t,{g:function(){return G}});var n=r(80854),a=r(1279),i=r(62753),s=r(9144),o=r(30120),c=r(90149),u=r(56371),l=r(67294),d=r(59499),p=r(36864),f=r(49501),v=r(57609),x=r(58527),h=r(85893);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(e){var t=(0,p.Z)({},e);return(0,h.jsx)(x.G,g(g({event:{eventName:v.vh.TOOL_TIP,eventParams:{tooltip:"Gas Calc"}}},t),{},{children:(0,h.jsx)(f.cC,{id:"This gas calculation is only an estimation. Your wallet will set the price of the transaction. You can modify the gas settings directly from your wallet provider."})}))},y=r(69331),j=r(82482),C=r(52369),T=r(83901);var A=r(8195),O=r(50597),w=r(63206),k=r(38776),P=r(87669),S=r(31001),I=function(e){var t=(0,O.Y)((function(e){return e.jsonRpcProvider}));return(0,P.h)({queries:e.map((function(e){return{queryKey:S.B.gasPrices(e),queryFn:function(){return t(e).getFeeData().then((function(e){return function(e){var t,r,n,a,i={legacyGasPrice:(null===(t=e.gasPrice)||void 0===t?void 0:t.toString())||"0",maxFeePerGas:(null===(r=e.maxFeePerGas)||void 0===r?void 0:r.toString())||"0",maxPriorityFeePerGas:(null===(n=e.maxPriorityFeePerGas)||void 0===n?void 0:n.toString())||"0"};return a={},(0,d.Z)(a,T.TP.Slow,i),(0,d.Z)(a,T.TP.Normal,i),(0,d.Z)(a,T.TP.Fast,i),a}(e)}))},refetchInterval:3e4}}))})},N=r(41024),G=function(e){var t,r=e.gasLimit,d=e.skipLoad,p=e.disabled,f=e.rightComponent,v=e.chainId,x=function(){var e=l.useContext(T.N4);if(void 0===e)throw new Error("useGasStation must be used within a GasStationProvider");return e}().state,b=(0,O.Y)((function(e){return e.currentChainId})),g=null!==v&&void 0!==v?v:b,P=Object.values(w.ei).find((function(e){return e.chainId===g}));(0,k.Z)(P,"No market for this network");var S=(0,C.J)(P).data,G=function(e){return I([e])[0]}(g),E=G.data,D=null===(t=(0,j.P)(P).walletBalances[n.hP.toLowerCase()])||void 0===t?void 0:t.amountUSD,_=(0,w.Mo)(g),M=_.name,R=_.baseAssetSymbol,Z=(0,A.vR)().loadingTxns,U=E&&null!==S&&void 0!==S&&S.baseCurrencyData?function(e,t,r,n,a){var i=t===T.TP.Custom?(0,u.parseUnits)(r,"gwei").toString():n[t].legacyGasPrice;return Number((0,u.formatUnits)(e.mul(i),18))*parseFloat(a)}(r,x.gasOption,x.customGas,E,(0,a.Fv)(null===S||void 0===S?void 0:S.baseCurrencyData.networkBaseTokenPriceInUsd,null===S||void 0===S?void 0:S.baseCurrencyData.networkBaseTokenPriceDecimals)):void 0;return(0,h.jsxs)(s.Z,{gap:6,sx:{width:"100%"},children:[(0,h.jsxs)(o.Z,{sx:{display:"flex",mt:6,justifyContent:"space-between"},children:[(0,h.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,h.jsx)(i.Z,{color:"primary",sx:{fontSize:"16px",mr:1.5}}),Z&&!d?(0,h.jsx)(c.Z,{color:"inherit",size:"16px",sx:{mr:2}}):U&&!p?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(N.B,{value:U,symbol:"USD",color:"text.secondary"}),(0,h.jsx)(m,{})]}):"-"]}),f]}),!p&&Number(D)<Number(U)&&(0,h.jsx)(o.Z,{sx:{display:"flex",alignItems:"center"},children:(0,h.jsxs)(y.v,{severity:"warning",sx:{mb:0,mx:"auto"},children:["You do not have enough ",R," in your account to pay for transaction fees on"," ",M," network. Please deposit ",R," from another account."]})})]})}},89291:function(e,t,r){r.d(t,{Z:function(){return T},Q:function(){return A}});var n=r(90116),a=r(59499),i=r(50029),s=r(17674),o=r(87794),c=r.n(o),u=r(75331),l=r(80854),d=r(85945),p=r(67294),f=r(8195),v=r(77537),x=r(50597),h=r(32113),b=r(39771),g=r(31001);function m(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T="Signed correctly",A=function(e){var t=e.handleGetTxns,r=e.handleGetPermitTxns,a=e.tryPermit,o=void 0!==a&&a,y=e.permitAction,j=e.skip,A=e.protocolAction,O=e.deps,w=void 0===O?[]:O,k=e.eventTxInfo,P=(0,f.vR)(),S=P.approvalTxState,I=P.setApprovalTxState,N=P.mainTxState,G=P.setMainTxState,E=P.setGasLimit,D=P.loadingTxns,_=P.setLoadingTxns,M=P.setTxError,R=(0,v.Z)(),Z=R.signTxData,U=R.sendTx,L=R.getTxError,H=(0,p.useState)([]),B=H[0],F=H[1],q=(0,p.useState)(),V=q[0],W=q[1],z=(0,d.NL)(),Y=(0,x.Y)((function(e){return[e.signERC20Approval,e.walletApprovalMethodPreference,e.generateCreditDelegationSignatureRequest,e.generatePermitPayloadForMigrationSupplyAsset,e.addTransaction,e.signStakingApproval,e.currentMarketData]})),Q=(0,s.Z)(Y,7),K=Q[0],J=Q[1],$=Q[2],X=Q[3],ee=Q[4],te=Q[5],re=Q[6],ne=(0,p.useState)(),ae=ne[0],ie=ne[1],se=(0,p.useState)(),oe=se[0],ce=se[1],ue=(0,p.useState)(!1),le=ue[0],de=ue[1],pe=(0,p.useRef)(!1);(0,p.useEffect)((function(){return pe.current=!0,function(){pe.current=!1}}),[]);var fe=function(){var e=(0,i.Z)(c().mark((function e(t){var r,n,a,i,s,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tx,n=t.errorCallback,a=t.successCallback,i=t.approval,e.prev=1,e.next=4,r();case 4:return s=e.sent,e.prev=5,e.next=8,s.wait(1);case 8:pe.current&&a&&a(s),ee(s.hash,C({txState:"success",action:i?u.UQ.approval:null!==A&&void 0!==A?A:u.UQ.default},k)),z.invalidateQueries({queryKey:g.B.pool}),z.invalidateQueries({queryKey:g.B.gho}),z.invalidateQueries({queryKey:g.B.staking}),e.next=32;break;case 15:return e.prev=15,e.t0=e.catch(5),e.prev=17,e.next=20,L(s.hash);case 20:return o=e.sent,pe.current&&n&&n(new Error(o),s.hash),e.abrupt("return");case 25:return e.prev=25,e.t1=e.catch(17),pe.current&&n&&n(e.t1,s.hash),e.abrupt("return");case 29:return e.prev=29,ee(s.hash,C({txState:"failed",action:A||u.UQ.default},k)),e.finish(29);case 32:return e.abrupt("return");case 35:e.prev=35,e.t2=e.catch(1),n&&n(e.t2);case 38:case"end":return e.stop()}}),e,null,[[1,35],[5,15],[17,25,29,32]])})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=(0,i.Z)(c().mark((function e(t){var r,n,a,s,o,u,l,d,p,f,v,x,h,g,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ae){e.next=77;break}if(!(le&&t&&(null===t||void 0===t?void 0:t.length)>0)){e.next=59;break}I(C(C({},S),{},{loading:!0})),e.prev=3,r=Math.floor(Date.now()/1e3+3600).toString(),n=[],a=m(t);try{for(a.s();!(s=a.n()).done;)(o=s.value).permitType&&"POOL"!=o.permitType?"SUPPLY_MIGRATOR_V3"===o.permitType?n.push(X(C(C({},o),{},{deadline:r}))):"BORROW_MIGRATOR_V3"===o.permitType?n.push($(C(C({},o),{},{deadline:r,spender:re.addresses.V3_MIGRATOR||""}))):"STAKE"===o.permitType&&n.push(te({token:o.underlyingAsset,amount:o.amount,deadline:r})):n.push(K({reserve:o.underlyingAsset,amount:o.amount,deadline:r}))}catch(j){a.e(j)}finally{a.f()}return e.prev=8,u=[],e.next=12,Promise.all(n);case 12:l=e.sent,d=m(l),e.prev=14,d.s();case 16:if((p=d.n()).done){e.next=25;break}return f=p.value,e.t0=u,e.next=21,Z(f);case 21:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 23:e.next=16;break;case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(14),d.e(e.t2);case 30:return e.prev=30,d.f(),e.finish(30);case 33:if(pe.current){e.next=35;break}return e.abrupt("return");case 35:F(u),W(r),I({txHash:T,loading:!1,success:!0}),M(void 0),e.next=48;break;case 41:if(e.prev=41,e.t3=e.catch(8),pe.current){e.next=45;break}return e.abrupt("return");case 45:v=(0,b.WG)(e.t3,b.aD.APPROVAL,!1),M(v),I({txHash:void 0,loading:!1});case 48:e.next=57;break;case 50:if(e.prev=50,e.t4=e.catch(3),pe.current){e.next=54;break}return e.abrupt("return");case 54:x=(0,b.WG)(e.t4,b.aD.GAS_ESTIMATION,!1),M(x),I({txHash:void 0,loading:!1});case 57:e.next=77;break;case 59:return e.prev=59,I(C(C({},S),{},{loading:!0})),e.next=63,Promise.all(ae.map((function(e){return e.tx()})));case 63:return h=e.sent,e.next=66,Promise.all(h.map((function(e){return new Promise(function(){var t=(0,i.Z)(c().mark((function t(r,n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete e.gasPrice,fe({tx:function(){return U(e)},successCallback:function(e){r(e)},errorCallback:function(e,t){var r=(0,b.WG)(e,b.aD.APPROVAL,!1);M(r),I({txHash:t,loading:!1}),n()},approval:!0});case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())})));case 66:g=e.sent,I({txHash:g[0].hash,loading:!1,success:!0}),e.next=77;break;case 70:if(e.prev=70,e.t5=e.catch(59),pe.current){e.next=74;break}return e.abrupt("return");case 74:y=(0,b.WG)(e.t5,b.aD.GAS_ESTIMATION,!1),M(y),I({txHash:void 0,loading:!1});case 77:case"end":return e.stop()}}),e,null,[[3,50],[8,41],[14,27,30,33],[59,70]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=(0,i.Z)(c().mark((function e(){var t,n,a,i,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!le||!r){e.next=21;break}if(B.length&&V){e.next=3;break}throw new Error("signature needed");case 3:return e.prev=3,G(C(C({},N),{},{loading:!0})),e.next=7,r(B,V);case 7:return t=e.sent,e.next=10,t[0].tx();case 10:return delete(n=e.sent).gasPrice,e.abrupt("return",fe({tx:function(){return U(n)},successCallback:function(e){G({txHash:e.hash,loading:!1,success:!0}),M(void 0)},errorCallback:function(e,t){var r=(0,b.WG)(e,b.aD.MAIN_ACTION);M(r),G({txHash:t,loading:!1})}}));case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0,"error"),a=(0,b.WG)(e.t0,b.aD.GAS_ESTIMATION,!1),M(a),G({txHash:void 0,loading:!1});case 21:if(le&&ae||!oe){e.next=37;break}return e.prev=22,G(C(C({},N),{},{loading:!0})),e.next=26,oe.tx();case 26:return delete(i=e.sent).gasPrice,e.abrupt("return",fe({tx:function(){return U(i)},successCallback:function(e){G({txHash:e.hash,loading:!1,success:!0}),M(void 0)},errorCallback:function(e,t){var r=(0,b.WG)(e,b.aD.MAIN_ACTION);M(r),G({txHash:t,loading:!1})}}));case 31:e.prev=31,e.t1=e.catch(22),s=(0,b.WG)(e.t1,b.aD.GAS_ESTIMATION,!1),console.log(e.t1,s),M(s),G({txHash:void 0,loading:!1});case 37:case"end":return e.stop()}}),e,null,[[3,15],[22,31]])})));return function(){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){if(!j){_(!0);var e=setTimeout((function(){return _(!0),t().then(function(){var e=(0,i.Z)(c().mark((function e(t){var n,a,i,s,u,d,p,f,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pe.current){e.next=2;break}return e.abrupt("return");case 2:if(n=t.filter((function(e){return"ERC20_APPROVAL"==e.txType})),n.length>0&&ie(n),a=o&&J===h.n.PERMIT&&r&&y,!(n.length>0&&a)){e.next=14;break}de(!0),i=l.eB[y],E(i.limit||""),G({txHash:void 0}),M(void 0),_(!1),e.next=50;break;case 14:de(!1),n.length>0&&ie(n),ce(t.find((function(e){return["DLP_ACTION","REWARD_ACTION","FAUCET_V2_MINT","FAUCET_MINT","STAKE_ACTION","GOV_DELEGATION_ACTION","GOVERNANCE_ACTION","V3_MIGRATION_ACTION"].includes(e.txType)}))),G({txHash:void 0}),M(void 0),s=0,e.prev=20,u=m(t),e.prev=22,u.s();case 24:if((d=u.n()).done){e.next=32;break}return p=d.value,e.next=28,p.gas();case 28:(f=e.sent)&&f.gasLimit&&(s+=Number(f.gasLimit));case 30:e.next=24;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(22),u.e(e.t0);case 37:return e.prev=37,u.f(),e.finish(37);case 40:e.next=48;break;case 42:if(e.prev=42,e.t1=e.catch(20),pe.current){e.next=46;break}return e.abrupt("return");case 46:v=(0,b.WG)(e.t1,b.aD.GAS_ESTIMATION,!1),M(v);case 48:E(s.toString()||""),_(!1);case 50:case"end":return e.stop()}}),e,null,[[20,42],[22,34,37,40]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){if(pe.current){G({txHash:void 0});var t=(0,b.WG)(e,b.aD.GAS_ESTIMATION,!1);M(t),_(!1)}}))}),1e3);return function(){return clearTimeout(e)}}ie(void 0),ce(void 0)}),[j].concat((0,n.Z)(w),[o,J])),{approval:ve,action:xe,loadingTxns:D,setUsePermit:de,requiresApproval:!!ae||le,approvalTxState:S,mainTxState:N,usePermit:le}}},39771:function(e,t,r){r.d(t,{aD:function(){return n},WG:function(){return s}});var n,a=r(49501),i=r(85893);!function(e){e[e.APPROVAL=0]="APPROVAL",e[e.MAIN_ACTION=1]="MAIN_ACTION",e[e.GAS_ESTIMATION=2]="GAS_ESTIMATION"}(n||(n={}));var s=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=1;if("MetaMask Tx Signature: User denied transaction signature."===e.message||"MetaMask Message Signature: User denied message signature."===e.message)return{error:o[4001],blocking:!1,actionBlocked:!1,rawError:e,txAction:t};try{var a,i=JSON.parse(null===e||void 0===e||null===(a=e.error)||void 0===a?void 0:a.body),s=Number(i.error.message.split(": ")[1]);isNaN(s)||(n=s)}catch(u){}var c=o[n];return c?{error:c,blocking:r,actionBlocked:!0,rawError:e,txAction:t}:{error:void 0,blocking:r,actionBlocked:!0,rawError:e,txAction:t}},o={7:(0,i.jsx)(a.cC,{id:"Pool addresses provider is not registered"}),9:(0,i.jsx)(a.cC,{id:"Address is not a contract"}),11:(0,i.jsx)(a.cC,{id:"The caller of the function is not an AToken"}),12:(0,i.jsx)(a.cC,{id:"The address of the pool addresses provider is invalid"}),13:(0,i.jsx)(a.cC,{id:"Invalid return value of the flashloan executor function"}),19:(0,i.jsx)(a.cC,{id:"Invalid flashloan premium"}),22:(0,i.jsx)(a.cC,{id:"Invalid bridge protocol fee"}),23:(0,i.jsx)(a.cC,{id:"The caller of this function must be a pool"}),24:(0,i.jsx)(a.cC,{id:"Invalid amount to mint"}),25:(0,i.jsx)(a.cC,{id:"Invalid amount to burn"}),26:(0,i.jsx)(a.cC,{id:"Amount must be greater than 0"}),27:(0,i.jsx)(a.cC,{id:"Action requires an active reserve"}),28:(0,i.jsx)(a.cC,{id:"Action cannot be performed because the reserve is frozen"}),29:(0,i.jsx)(a.cC,{id:"Action cannot be performed because the reserve is paused"}),30:(0,i.jsx)(a.cC,{id:"Borrowing is not enabled"}),31:(0,i.jsx)(a.cC,{id:"Stable borrowing is not enabled"}),32:(0,i.jsx)(a.cC,{id:"User cannot withdraw more than the available balance"}),34:(0,i.jsx)(a.cC,{id:"The collateral balance is 0"}),35:(0,i.jsx)(a.cC,{id:"Health factor is lesser than the liquidation threshold"}),36:(0,i.jsx)(a.cC,{id:"There is not enough collateral to cover a new borrow"}),37:(0,i.jsx)(a.cC,{id:"Collateral is (mostly) the same currency that is being borrowed"}),38:(0,i.jsx)(a.cC,{id:"The requested amount is greater than the max loan size in stable rate mode"}),39:(0,i.jsx)(a.cC,{id:"For repayment of a specific type of debt, the user needs to have debt that type"}),40:(0,i.jsx)(a.cC,{id:"To repay on behalf of a user an explicit amount to repay is needed"}),41:(0,i.jsx)(a.cC,{id:"User does not have outstanding stable rate debt on this reserve"}),42:(0,i.jsx)(a.cC,{id:"User does not have outstanding variable rate debt on this reserve"}),43:(0,i.jsx)(a.cC,{id:"The underlying balance needs to be greater than 0"}),44:(0,i.jsx)(a.cC,{id:"Interest rate rebalance conditions were not met"}),45:(0,i.jsx)(a.cC,{id:"Health factor is not below the threshold"}),46:(0,i.jsx)(a.cC,{id:"The collateral chosen cannot be liquidated"}),47:(0,i.jsx)(a.cC,{id:"User did not borrow the specified currency"}),48:(0,i.jsx)(a.cC,{id:"Borrow and repay in same block is not allowed"}),49:(0,i.jsx)(a.cC,{id:"Inconsistent flashloan parameters"}),50:(0,i.jsx)(a.cC,{id:"Borrow cap is exceeded"}),51:(0,i.jsx)(a.cC,{id:"Supply cap is exceeded"}),52:(0,i.jsx)(a.cC,{id:"Unbacked mint cap is exceeded"}),53:(0,i.jsx)(a.cC,{id:"Debt ceiling is exceeded"}),54:(0,i.jsx)(a.cC,{id:"AToken supply is not zero"}),55:(0,i.jsx)(a.cC,{id:"Stable debt supply is not zero"}),56:(0,i.jsx)(a.cC,{id:"Variable debt supply is not zero"}),57:(0,i.jsx)(a.cC,{id:"Ltv validation failed"}),60:(0,i.jsx)(a.cC,{id:"Asset is not borrowable in isolation mode"}),62:(0,i.jsx)(a.cC,{id:"User is in isolation mode"}),76:(0,i.jsx)(a.cC,{id:"Array parameters that should be equal length are not"}),77:(0,i.jsx)(a.cC,{id:"Zero address not valid"}),78:(0,i.jsx)(a.cC,{id:"Invalid expiration"}),79:(0,i.jsx)(a.cC,{id:"Invalid signature"}),80:(0,i.jsx)(a.cC,{id:"Operation not supported"}),81:(0,i.jsx)(a.cC,{id:"Debt ceiling is not zero"}),82:(0,i.jsx)(a.cC,{id:"Asset is not listed"}),85:(0,i.jsx)(a.cC,{id:"The underlying asset cannot be rescued"}),88:(0,i.jsx)(a.cC,{id:"Stable borrowing is enabled"}),89:(0,i.jsx)(a.cC,{id:"User is trying to borrow multiple assets including a siloed one"}),4001:(0,i.jsx)(a.cC,{id:"You cancelled the transaction."})}}}]);
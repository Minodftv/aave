"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3866],{50020:function(e,r,t){var n=t(59499),o=t(4730),a=t(91655),i=t(30120),s=t(29630),c=(t(67294),t(73965)),l=t(41024),u=t(85893),d=["minVal","maxVal","percentVariant","hyphenVariant"];function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function x(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=function(e){var r=e.minVal,t=e.maxVal,n=e.percentVariant,p=e.hyphenVariant,m=(0,o.Z)(e,d),v=(0,c.HT)(),b=v.ghoLoadingData,h=v.ghoReserveData;if(b)return(0,u.jsx)(a.Z,{width:70,height:24});var y=null!==r&&void 0!==r?r:h.ghoBorrowAPYWithMaxDiscount,f=null!==t&&void 0!==t?t:h.ghoVariableBorrowAPY,g=Number((100*y).toFixed(2))===Number((100*f).toFixed(2));return(0,u.jsx)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:g?(0,u.jsx)(l.B,x({compact:!0,percent:!0,value:y,visibleDecimals:2,variant:null!==n&&void 0!==n?n:"h3","data-cy":"apy"},m)):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.B,x({compact:!0,value:100*y,visibleDecimals:2,variant:null!==n&&void 0!==n?n:"h3","data-cy":"apy-gho-from"},m)),(0,u.jsx)(s.Z,{variant:null!==p&&void 0!==p?p:"secondary16",color:"text.secondary",sx:{mx:.5},children:"-"}),(0,u.jsx)(l.B,x({compact:!0,percent:!0,value:f,visibleDecimals:2,variant:null!==n&&void 0!==n?n:"h3","data-cy":"apy-gho-till"},m))]})})}},99552:function(e,r,t){t.d(r,{B:function(){return b}});var n=t(90116),o=t(49501),a=t(30120),i=t(29630),s=t(72389),c=t(73965),l=t(97563),u=t(50020),d=t(41024),p=t(68861),x=t(14463),m=t(72667),v=t(85893),b=function(e){var r=e.value,t=e.useApyRange,b=e.rangeValues,h=void 0===b?[0,0]:b,y=e.ghoRoute,f=e.stkAaveBalance,g=e.userQualifiesForDiscount,j=e.onMoreDetailsClick,w=e.withTokenIcon,S=void 0!==w&&w,A=e.forceShowTooltip,D=void 0!==A&&A,T=e.variant,O=void 0===T?"secondary14":T,B=e.color,k=void 0===B?void 0:B,P=(0,c.HT)().ghoReserveData,Z=Number(f),C=Z>=P.ghoMinDiscountTokenBalanceForDiscount,I=(0,v.jsx)(v.Fragment,{}),E=g||D;return E&&(I=(0,v.jsx)(a.Z,{sx:{py:4,px:6,fontSize:"12px",lineHeight:"16px",a:{fontSize:"12px",lineHeight:"16px",fontWeight:500}},children:(0,v.jsxs)(i.Z,{variant:"subheader2",children:[(0,v.jsx)(o.cC,{id:"Estimated compounding interest, including discount for Staking {0}AAVE in Safety Module.",values:{0:C?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.B,{variant:"subheader2",value:Z,visibleDecimals:2})," "]}):null}})," ",(0,v.jsx)(p.rU,{onClick:j,href:y,underline:"always",variant:"subheader2",children:(0,v.jsx)(o.cC,{id:"Learn more"})})]})})),(0,v.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column",alignItems:{xs:"flex-end",xsm:"center"},justifyContent:"center",textAlign:"center",flex:"2 1 auto"},children:"-1"!==r.toString()?(0,v.jsx)(s.Z,{enterTouchDelay:0,leaveTouchDelay:0,placement:"top",title:I,arrow:E,PopperComponent:l.E,children:(0,v.jsxs)(a.Z,{sx:function(){return{display:"flex",alignItems:"center"}},children:[S&&(0,v.jsx)(m.T1,{symbol:"stkAAVE",sx:{height:14,width:14,mr:1}}),t?(0,v.jsx)(u.Z,{percentVariant:O,hyphenVariant:O,minVal:Math.min.apply(Math,(0,n.Z)(h)),maxVal:Math.max.apply(Math,(0,n.Z)(h)),color:k}):(0,v.jsx)(d.B,{value:r,percent:!0,variant:O,color:k,"data-cy":"apy"})]})}):(0,v.jsx)(x.J,{variant:"secondary14",color:"text.secondary"})})}},75437:function(e,r,t){t.d(r,{x:function(){return d},n:function(){return p}});var n=t(59499),o=t(49501),a=t(57609),i=t(68861),s=t(58527),c=t(85893);function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var d=(0,c.jsx)(o.cC,{id:"Interest rate that is determined by Aave Governance. This rate may be changed over time depending on the need for the GHO supply to contract/expand. <0>Learn more</0>",components:{0:(0,c.jsx)(i.rU,{href:"https://docs.gho.xyz/concepts/how-gho-works/interest-rate-discount-model#interest-rate-model",underline:"always"})}}),p=function(e){return(0,c.jsx)(s.G,u(u({event:{eventName:a.vh.TOOL_TIP,eventParams:{tooltip:"GHO APY"}}},e),{},{children:d}))}},14463:function(e,r,t){t.d(r,{J:function(){return c}});var n=t(59499),o=t(29630),a=(t(67294),t(85893));function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var c=function(e){return(0,a.jsx)(o.Z,s(s({},e),{},{children:"\u2014"}))}},54423:function(e,r,t){t.r(r),t.d(r,{DebtSwitchModal:function(){return Ze}});var n=t(59499),o=t(49501),a=t(67294),i=t(31959),s=t(47130),c=t(8195),l=t(94635),u=t(90116),d=t(75331),p=t(1279),x=t(21046),m=t(52358),v=t(80227),b=t(9144),h=t(29630),y=t(81645),f=t(30120),g=t(63366),j=t(87462),w=t(86010),S=t(94780),A=t(81719),D=t(78884),T=t(36622),O=t(34867);function B(e){return(0,O.Z)("MuiListSubheader",e)}(0,t(1588).Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);var k=t(85893);const P=["className","color","component","disableGutters","disableSticky","inset"],Z=(0,A.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,"default"!==t.color&&r[`color${(0,T.Z)(t.color)}`],!t.disableGutters&&r.gutters,t.inset&&r.inset,!t.disableSticky&&r.sticky]}})((({theme:e,ownerState:r})=>(0,j.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},"primary"===r.color&&{color:(e.vars||e).palette.primary.main},"inherit"===r.color&&{color:"inherit"},!r.disableGutters&&{paddingLeft:16,paddingRight:16},r.inset&&{paddingLeft:72},!r.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})));var C=a.forwardRef((function(e,r){const t=(0,D.Z)({props:e,name:"MuiListSubheader"}),{className:n,color:o="default",component:a="li",disableGutters:i=!1,disableSticky:s=!1,inset:c=!1}=t,l=(0,g.Z)(t,P),u=(0,j.Z)({},t,{color:o,component:a,disableGutters:i,disableSticky:s,inset:c}),d=(e=>{const{classes:r,color:t,disableGutters:n,inset:o,disableSticky:a}=e,i={root:["root","default"!==t&&`color${(0,T.Z)(t)}`,!n&&"gutters",o&&"inset",!a&&"sticky"]};return(0,S.Z)(i,B,r)})(u);return(0,k.jsx)(Z,(0,j.Z)({as:a,className:(0,w.default)(d.root,n),ref:r,ownerState:u},l))})),I=t(61702),E=t(70794),R=t(99552),M=t(25935),F=t(41024),Y=t(68861),N=t(72667),U=t(69331),G=t(53601),V=t(57824),H=t(74119),L=t(50029),W=t(87794),_=t.n(W),q=t(73030),z=t(3622),Q=t(77537),X=t(20301),$=t(50597),J=t(59286),K=t(69125),ee=t(73965),re=t(93608),te=t(99730),ne=t(17674),oe=t(80854),ae=t(85945),ie=t(56371),se=t(89291),ce=t(32113),le=t(39771),ue=t(31001),de=t(67489),pe=t(94671);function xe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function me(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?xe(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xe(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var ve,be=function(e){var r=e.amountToSwap,t=e.amountToReceive,n=e.isWrongNetwork,i=e.sx,s=e.poolReserve,l=e.targetReserve,u=e.isMaxSelected,p=e.loading,x=e.blocked,m=e.buildTxFn,v=e.currentRateMode,b=(0,$.Y)((function(e){return[e.getCreditDelegationApprovedAmount,e.currentMarketData,e.generateApproveDelegation,e.estimateGasLimit,e.addTransaction,e.debtSwitch,e.walletApprovalMethodPreference,e.generateCreditDelegationSignatureRequest]})),h=(0,ne.Z)(b,8),y=h[0],f=h[1],g=h[2],j=h[3],w=h[4],S=h[5],A=h[6],D=h[7],T=(0,c.vR)(),O=T.approvalTxState,B=T.mainTxState,P=T.loadingTxns,Z=T.setMainTxState,C=T.setTxError,I=T.setGasLimit,E=T.setLoadingTxns,R=T.setApprovalTxState,M=(0,Q.Z)(),F=M.sendTx,Y=M.signTxData,N=(0,ae.NL)(),U=(0,a.useState)(!1),G=U[0],V=U[1],W=(0,a.useState)(),q=W[0],z=W[1],X=(0,a.useState)(!1),J=X[0],K=X[1],ee=(0,a.useState)(),re=ee[0],te=ee[1],xe=f.v3;(0,a.useEffect)((function(){var e=A===ce.n.PERMIT;K(e)}),[A]);var ve=function(){var e=(0,L.Z)(_().mark((function e(){var r,n,o,a,i,s,c,u,p;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!G||!q){e.next=29;break}if(r=(0,H.sm)(t,l.decimals,.25),!J||!xe){e.next=15;break}return o=Math.floor(Date.now()/1e3+3600).toString(),e.next=7,D({underlyingAsset:l.variableDebtTokenAddress,deadline:o,amount:r,spender:null!==(n=f.addresses.DEBT_SWITCH_ADAPTER)&&void 0!==n?n:""});case 7:return a=e.sent,e.next=10,Y(a);case 10:i=e.sent,te({signature:i,deadline:o,amount:r}),R({txHash:se.Z,loading:!1,success:!0}),e.next=29;break;case 15:return c=g({debtTokenAddress:l.variableDebtTokenAddress,delegatee:null!==(s=f.addresses.DEBT_SWITCH_ADAPTER)&&void 0!==s?s:"",amount:r}),R(me(me({},O),{},{loading:!0})),e.next=19,j(c);case 19:return c=e.sent,e.next=22,F(c);case 22:return u=e.sent,e.next=25,u.wait(1);case 25:R({txHash:u.hash,loading:!1,success:!0}),w(u.hash,{action:d.UQ.approval,txState:"success",asset:l.variableDebtTokenAddress,amount:r,assetName:"varDebt"+l.name,spender:f.addresses.DEBT_SWITCH_ADAPTER}),C(void 0),he(!0);case 29:e.next=36;break;case 31:e.prev=31,e.t0=e.catch(0),p=(0,le.WG)(e.t0,le.aD.GAS_ESTIMATION,!1),C(p),O.success||R({txHash:void 0,loading:!1});case 36:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,L.Z)(_().mark((function e(){var o,a,i,c;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Z(me(me({},B),{},{loading:!0})),e.next=4,m();case 4:return o=e.sent,a=S({poolReserve:s,targetReserve:l,currentRateMode:v,amountToReceive:(0,ie.parseUnits)(t,l.decimals).toString(),amountToSwap:(0,ie.parseUnits)(r,s.decimals).toString(),isMaxSelected:u,txCalldata:o.swapCallData,augustus:o.augustus,signatureParams:re,isWrongNetwork:n}),e.next=8,j(a);case 8:return a=e.sent,e.next=11,F(a);case 11:return i=e.sent,e.next=14,i.wait(1);case 14:Z({txHash:i.hash,loading:!1,success:!0}),w(i.hash,{action:"debtSwitch",txState:"success",previousState:o.outputAmount+(2===v?" variable"+s.symbol:" stable"+s.symbol),newState:o.inputAmount+" variable"+l.symbol}),N.invalidateQueries({queryKey:ue.B.pool}),N.invalidateQueries({queryKey:ue.B.gho}),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(0),c=(0,le.WG)(e.t0,le.aD.GAS_ESTIMATION,!1),C(c),Z({txHash:void 0,loading:!1});case 25:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),he=(0,a.useCallback)(function(){var e=(0,L.Z)(_().mark((function e(r){var n,o,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=q)&&!r){e.next=9;break}return E(!0),e.next=5,y({debtTokenAddress:l.variableDebtTokenAddress,delegatee:null!==(o=f.addresses.DEBT_SWITCH_ADAPTER)&&void 0!==o?o:""});case 5:n=e.sent,z(n),e.next=11;break;case 9:V(!1),R({});case 11:n&&(a=(0,pe.iv)({approvedAmount:n.amount,amount:t,signedAmount:"0"}),V(a),a&&R({})),E(!1);case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[q,E,y,l.variableDebtTokenAddress,f.addresses.DEBT_SWITCH_ADAPTER,R,t]);return(0,a.useEffect)((function(){"0"!==r&&(q?q.debtTokenAddress!==l.variableDebtTokenAddress&&he(!0):he())}),[r,q,he,l.variableDebtTokenAddress]),(0,a.useEffect)((function(){var e=0;e=Number(oe.eB[d.UQ.borrow].recommended),G&&!O.success&&(e+=Number(pe.Fi)),I(e.toString())}),[G,O,I]),(0,k.jsx)(de.B,{mainTxState:B,approvalTxState:O,isWrongNetwork:n,preparingTransactions:P,handleAction:be,requiresAmount:!0,amount:r,handleApproval:function(){return ve()},requiresApproval:G,actionText:(0,k.jsx)(o.cC,{id:"Switch"}),actionInProgressText:(0,k.jsx)(o.cC,{id:"Switching"}),sx:i,fetchingData:p,errorParams:{loading:!1,disabled:x||!(null!==O&&void 0!==O&&O.success),content:(0,k.jsx)(o.cC,{id:"Switch"}),handleClick:be},blocked:x,tryPermit:xe})},he=t(91655),ye=t(75437),fe=t(92391),ge=t(58527),je=(0,k.jsx)(y.Z,{color:"primary",sx:{fontSize:"14px",mx:1},children:(0,k.jsx)(v.Z,{})}),we=function(e){var r,t,n=e.switchSource,a=e.switchTarget,i=e.toAmount,s=e.fromAmount,c=e.loading,l=e.sourceBalance,u=e.sourceBorrowAPY,d=e.targetBorrowAPY,x=e.showAPYTypeChange,m=e.ghoData,g=e.currentMarket,j=(0,p.hE)(l).minus((0,p.hE)(s)),w=(0,p.hE)(a.variableBorrows).plus((0,p.hE)(i)),S=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(he.Z,{variant:"rectangular",height:20,width:100,sx:{borderRadius:"4px"}}),(0,k.jsx)(he.Z,{variant:"rectangular",height:15,width:80,sx:{borderRadius:"4px",marginTop:"4px"}})]}),A=0,D=null===m||void 0===m?void 0:m.ghoApyRange;return"GHO"===a.reserve.symbol&&m&&(A=(0,K.li)(m.ghoVariableBorrowApy,m.userCurrentBorrowBalance+m.inputAmount,m.userGhoAvailableToBorrowAtDiscount,m.ghoBorrowAPYWithMaxDiscount),D&&(D=[D[0],A])),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(fe.X,{caption:(0,k.jsx)(o.cC,{id:"Borrow apy"}),captionVariant:"description",mb:4,children:(0,k.jsx)(f.Z,{sx:{display:"flex",alignItems:"center"},children:c?(0,k.jsx)(he.Z,{variant:"rectangular",height:20,width:100,sx:{borderRadius:"4px"}}):(0,k.jsxs)(k.Fragment,{children:["GHO"===n.reserve.symbol&&m?(0,k.jsx)(R.B,{useApyRange:!1,rangeValues:m.ghoApyRange,variant:"main14",color:"text.secondary",value:m.userCurrentBorrowApy,"data-cy":"apyType",stkAaveBalance:m.userDiscountTokenBalance,ghoRoute:Y.Z6.reserveOverview(null!==(r=n.underlyingAsset)&&void 0!==r?r:"",g)+"/#discount",forceShowTooltip:!0,withTokenIcon:m.qualifiesForDiscount,userQualifiesForDiscount:m.qualifiesForDiscount}):(0,k.jsx)(F.B,{value:u,variant:"secondary14",percent:!0}),je,"GHO"===a.reserve.symbol&&m?(0,k.jsx)(R.B,{useApyRange:m.qualifiesForDiscount&&!m.inputAmount,rangeValues:0===m.inputAmount?m.ghoApyRange:D,variant:"main14",color:"text.secondary",value:0===m.inputAmount?m.userBorrowApyAfterMaxSwitch:A,"data-cy":"apyType",stkAaveBalance:m.userDiscountTokenBalance,ghoRoute:Y.Z6.reserveOverview(null!==(t=a.underlyingAsset)&&void 0!==t?t:"",g)+"/#discount",forceShowTooltip:!0,withTokenIcon:m.qualifiesForDiscount,userQualifiesForDiscount:m.qualifiesForDiscount}):(0,k.jsx)(F.B,{value:d,variant:"secondary14",percent:!0})]})})}),x&&(0,k.jsx)(fe.X,{caption:(0,k.jsxs)(b.Z,{direction:"row",children:[(0,k.jsx)(o.cC,{id:"APY type"}),(0,k.jsx)(ge.G,{children:(0,k.jsx)(o.cC,{id:"You can only switch to tokens with variable APY types. After this transaction, you may change the variable rate to a stable one if available."})})]}),captionVariant:"description",mb:4,children:(0,k.jsx)(f.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end"},children:c?(0,k.jsx)(he.Z,{variant:"rectangular",height:20,width:100,sx:{borderRadius:"4px"}}):(0,k.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:["GHO"===n.reserve.symbol?(0,k.jsx)(ye.n,{text:(0,k.jsx)(o.cC,{id:"Fixed"}),typography:"secondary14"}):(0,k.jsx)(h.Z,{variant:"secondary14",children:(0,k.jsx)(o.cC,{id:"Stable"})}),(0,k.jsx)(y.Z,{color:"primary",sx:{fontSize:"14px",mx:1},children:(0,k.jsx)(v.Z,{})}),"GHO"===a.reserve.symbol?(0,k.jsx)(ye.n,{text:(0,k.jsx)(o.cC,{id:"Fixed"}),typography:"secondary14"}):(0,k.jsx)(h.Z,{variant:"secondary14",children:(0,k.jsx)(o.cC,{id:"Variable"})})]})})}),(0,k.jsx)(V.aE,{incentives:n.reserve.aIncentivesData,symbol:n.reserve.symbol,futureIncentives:n.reserve.aIncentivesData,futureSymbol:n.reserve.symbol,loading:c}),(0,k.jsx)(fe.X,{caption:(0,k.jsx)(o.cC,{id:"Borrow balance after switch"}),captionVariant:"description",mb:4,align:"flex-start",children:(0,k.jsxs)(f.Z,{sx:{textAlign:"right"},children:[(0,k.jsx)(f.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center"},children:c?S:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,k.jsx)(N.T1,{symbol:n.reserve.iconSymbol,sx:{mr:2,ml:4,fontSize:"16px"}}),(0,k.jsx)(F.B,{value:j.toString(),variant:"secondary14",compact:!0})]}),(0,k.jsx)(F.B,{value:j.multipliedBy((0,p.hE)(n.reserve.priceInUSD)).toString(),variant:"helperText",compact:!0,symbol:"USD",symbolsColor:"text.secondary",color:"text.secondary"})]})}),(0,k.jsx)(f.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center"},mt:2,children:c?S:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,k.jsx)(N.T1,{symbol:a.reserve.iconSymbol,sx:{mr:2,ml:4,fontSize:"16px"}}),(0,k.jsx)(F.B,{value:w.toString(),variant:"secondary14",compact:!0})]}),(0,k.jsx)(F.B,{value:w.multipliedBy((0,p.hE)(a.reserve.priceInUSD)).toString(),variant:"helperText",compact:!0,symbol:"USD",symbolsColor:"text.secondary",color:"text.secondary"})]})})]})})]})};function Se(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Ae(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Se(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}!function(e){e[e.INSUFFICIENT_LIQUIDITY=0]="INSUFFICIENT_LIQUIDITY"}(ve||(ve={}));var De=function(e){var r=e.poolReserve,t=e.userReserve,n=e.isWrongNetwork,i=e.currentRateMode,s=e.user,l=(0,ee.HT)(),g=l.reserves,j=l.ghoReserveData,w=l.ghoUserData,S=l.ghoUserLoadingData,A=(0,$.Y)((function(e){return e.currentChainId})),D=(0,$.Y)((function(e){return e.currentNetworkConfig})),T=(0,Q.Z)().currentAccount,O=(0,c.vR)(),B=O.gasLimit,P=O.mainTxState,Z=O.txError,C=O.setTxError,I=(0,$.Y)((function(e){return e.currentMarket})),R=(0,$.Y)((function(e){return e.currentMarketData})),Y=(0,z.l)(R).data,W=(0,q.b)(R).data,ne=g.filter((function(e){return e.underlyingAsset!==r.underlyingAsset&&"0"!==e.availableLiquidity&&(0,J.hF)(e,s)})).map((function(e){return{address:e.underlyingAsset,symbol:e.symbol,iconSymbol:e.iconSymbol,variableApy:e.variableBorrowAPY,priceInUsd:e.priceInUSD,decimals:e.decimals}}));ne=[].concat((0,u.Z)(ne.filter((function(e){return"GHO"===e.symbol}))),(0,u.Z)(ne.filter((function(e){return"GHO"!==e.symbol}))));var oe=(0,a.useState)(""),ae=oe[0],ie=oe[1],se=(0,a.useRef)(""),ce=(0,a.useState)(ne[0]),le=ce[0],ue=ce[1],de=(0,a.useState)("0.1"),pe=de[0],xe=de[1],me=s.userReservesData.find((function(e){return e.underlyingAsset===le.address})),he=i===d.tk.Variable?t.variableBorrows:t.stableBorrows,ye="-1"===ae,fe=ye?he:ae,ge=function(e){var r=e.chainId,t=e.max,n=e.maxSlippage,o=e.skip,i=e.swapIn,s=e.swapOut,c=e.userAddress,l=(0,a.useState)("0"),u=l[0],d=l[1],x=(0,a.useState)("0"),m=x[0],v=x[1],b=(0,a.useState)("0"),h=b[0],y=b[1],f=(0,a.useState)("0"),g=f[0],j=f[1],w=(0,a.useState)(),S=w[0],A=w[1],D=(0,a.useState)(!1),T=D[0],O=D[1],B=(0,a.useState)(""),k=B[0],P=B[1],Z=(0,a.useMemo)((function(){return{underlyingAsset:i.underlyingAsset,decimals:i.decimals,supplyAPY:i.supplyAPY,amount:i.amount,variableBorrowAPY:i.variableBorrowAPY}}),[i.amount,i.decimals,i.supplyAPY,i.underlyingAsset,i.variableBorrowAPY]),C=(0,a.useMemo)((function(){return{underlyingAsset:s.underlyingAsset,decimals:s.decimals,supplyAPY:s.supplyAPY,amount:s.amount,variableBorrowAPY:s.variableBorrowAPY}}),[s.amount,s.decimals,s.supplyAPY,s.underlyingAsset,s.variableBorrowAPY]),I=(0,a.useCallback)((function(){return(0,H.wP)(Z,C,r,c,t)}),[r,t,Z,C,c]);return(0,a.useEffect)((function(){if(!o){var e=function(){var e=(0,L.Z)(_().mark((function e(){var r,t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z.underlyingAsset&&C.underlyingAsset&&C.amount&&"0"!==C.amount&&!isNaN(+C.amount)){e.next=7;break}return d("0"),v("0"),y("0"),j("0"),A(void 0),e.abrupt("return");case 7:return O(!0),e.prev=8,e.next=11,I();case 11:r=e.sent,P(""),A(r),d((0,p.Fv)(r.srcAmount,r.srcDecimals)),y((0,p.Fv)(r.destAmount,r.destDecimals)),v(r.srcUSD),j(r.destUSD),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(8),console.error(e.t0),t=(0,H.aE)(e.t0.message),P(t);case 25:return e.prev=25,O(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[8,20,25,28]])})));return function(){return e.apply(this,arguments)}}(),r=setTimeout((function(){e()}),400);return function(){clearTimeout(r)}}}),[o,Z.underlyingAsset,Z.amount,C.underlyingAsset,C.amount,I,n]),{outputAmount:h,outputAmountUSD:g,inputAmount:u,inputAmountUSD:m,loading:T,error:k,buildTxFn:function(){var e=(0,L.Z)(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S){e.next=2;break}throw new Error("Route required to build transaction");case 2:return e.abrupt("return",(0,H._n)(S,i,s,r,c,n));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}({chainId:D.underlyingChainId||A,userAddress:T,swapOut:Ae(Ae({},r),{},{amount:se.current}),swapIn:Ae(Ae({},me.reserve),{},{amount:"0"}),max:ye,skip:P.loading||!1,maxSlippage:Number(pe)}),je=ge.inputAmount,Se=ge.outputAmount,De=ge.outputAmountUSD,ke=ge.error,Pe=ge.loading,Ze=ge.buildTxFn,Ce=Pe&&"0"===De,Ie=(0,p.hE)(x.Bz.toString()),Ee="0";(0,K.rj)({symbol:me.reserve.symbol,currentMarket:I})?Ee=j.aaveFacilitatorRemainingCapacity.toString():(Ie="0"===me.reserve.borrowCap?(0,p.hE)(x.Bz.toString()):(0,p.hE)(Number(me.reserve.borrowCap)).minus((0,p.hE)(me.reserve.totalDebt)),Ee=me.reserve.formattedAvailableLiquidity);var Re=E.Z.max(E.Z.min(Ee,Ie),0),Me=Number(fe)*Number(r.priceInUSD),Fe=Number(je)*Number(le.priceInUsd),Ye=Fe-Me,Ne=0===Number(s.availableBorrowsUSD)||Ye>Number(s.availableBorrowsUSD),Ue=void 0;(0,E.Z)(je).gt(Re)&&(Ue=ve.INSUFFICIENT_LIQUIDITY);var Ge=function(){return Ue===ve.INSUFFICIENT_LIQUIDITY?(0,k.jsx)(o.cC,{id:"There is not enough liquidity for the target asset to perform the switch. Try lowering the amount."}):null},Ve=(0,H.LN)(je,pe,le.decimals||18);if(P.success)return(0,k.jsx)(re.R,{customAction:(0,k.jsxs)(b.Z,{gap:3,children:[(0,k.jsx)(h.Z,{variant:"description",color:"text.primary",children:(0,k.jsx)(o.cC,{id:"You've successfully switched borrow position."})}),(0,k.jsxs)(b.Z,{direction:"row",alignItems:"center",justifyContent:"center",gap:1,children:[(0,k.jsx)(N.T1,{symbol:r.iconSymbol,sx:{mx:1}}),(0,k.jsx)(F.B,{value:se.current,compact:!0,variant:"subheader1"}),r.symbol,(0,k.jsx)(y.Z,{color:"primary",sx:{fontSize:"14px",mx:1},children:(0,k.jsx)(v.Z,{})}),(0,k.jsx)(N.T1,{symbol:me.reserve.iconSymbol,sx:{mx:1}}),(0,k.jsx)(F.B,{value:Ve,compact:!0,variant:"subheader1"}),me.reserve.symbol]})]})});var He,Le=!1;if(g.some((function(e){return"GHO"===e.symbol}))){var We=Number(he)*Number(r.priceInUSD)+w.userGhoBorrowBalance,_e=(0,K.li)(j.ghoVariableBorrowAPY,w.userGhoBorrowBalance,w.userGhoAvailableToBorrowAtDiscount,j.ghoBorrowAPYWithMaxDiscount),qe=(0,K.li)(j.ghoVariableBorrowAPY,We,w.userGhoAvailableToBorrowAtDiscount,j.ghoBorrowAPYWithMaxDiscount),ze=S?void 0:[_e,qe];Le=!(!Y||!W)&&(0,K.k9)(W,Y,he),He={qualifiesForDiscount:Le,ghoApyRange:ze,userBorrowApyAfterMaxSwitch:qe,userDiscountTokenBalance:w.userDiscountTokenBalance,inputAmount:Number(fe),targetAmount:Number(je),userCurrentBorrowApy:_e,ghoVariableBorrowApy:j.ghoVariableBorrowAPY,userGhoAvailableToBorrowAtDiscount:w.userGhoAvailableToBorrowAtDiscount,ghoBorrowAPYWithMaxDiscount:j.ghoBorrowAPYWithMaxDiscount,userCurrentBorrowBalance:w.userGhoBorrowBalance}}return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(G.W,{value:fe,onChange:function(e){var r="-1"===e;se.current=r?he:e,ie(e),C(void 0)},usdValue:Me.toString(),symbol:r.symbol,assets:[{balance:he,address:r.underlyingAsset,symbol:r.symbol,iconSymbol:r.iconSymbol}],maxValue:he,inputTitle:(0,k.jsx)(o.cC,{id:"Borrowed asset amount"}),balanceText:(0,k.jsx)(a.Fragment,{children:(0,k.jsx)(o.cC,{id:"Borrow balance"})}),isMaxSelected:ye}),(0,k.jsxs)(f.Z,{sx:{padding:"18px",pt:"14px",display:"flex",justifyContent:"space-between"},children:[(0,k.jsx)(y.Z,{sx:{fontSize:"18px !important"},children:(0,k.jsx)(m.Z,{})}),(0,k.jsx)(M.B,{loading:Ce,outputAmountUSD:Fe.toString(),inputAmountUSD:Me.toString()})]}),(0,k.jsx)(G.W,{value:je,onSelect:ue,usdValue:Fe.toString(),symbol:le.symbol,assets:ne,inputTitle:(0,k.jsx)(o.cC,{id:"Switch to"}),balanceText:(0,k.jsx)(o.cC,{id:"Supply balance"}),disableInput:!0,loading:Ce,selectOptionHeader:(0,k.jsx)(Te,{}),selectOption:function(e){var r,t;return"GHO"===e.symbol?(0,k.jsx)(Be,{asset:e,ghoApyRange:null===(r=He)||void 0===r?void 0:r.ghoApyRange,userBorrowApyAfterMaxSwitch:null===(t=He)||void 0===t?void 0:t.userBorrowApyAfterMaxSwitch,userDiscountTokenBalance:w.userDiscountTokenBalance,currentMarket:I,qualifiesForDiscount:Le}):(0,k.jsx)(Oe,{asset:e})}}),ke&&!Ce&&(0,k.jsx)(h.Z,{variant:"helperText",color:"error.main",children:ke}),!ke&&void 0!==Ue&&(0,k.jsx)(h.Z,{variant:"helperText",color:"error.main",children:(0,k.jsx)(Ge,{})}),(0,k.jsx)(V.m6,{gasLimit:B,slippageSelector:(0,k.jsx)(X.n,{selectedSlippage:pe,setSlippage:function(e){C(void 0),xe(e)},slippageTooltipHeader:(0,k.jsxs)(b.Z,{direction:"row",gap:2,alignItems:"center",justifyContent:"space-between",children:[(0,k.jsx)(o.cC,{id:"Maximum amount received"}),(0,k.jsx)(b.Z,{alignItems:"end",children:(0,k.jsxs)(b.Z,{direction:"row",children:[(0,k.jsx)(N.T1,{symbol:me.reserve.iconSymbol,sx:{mr:1,fontSize:"14px"}}),(0,k.jsx)(F.B,{value:Ve,variant:"secondary12"})]})})]})}),children:(0,k.jsx)(we,{switchSource:t,switchTarget:me,toAmount:je,fromAmount:""===fe?"0":fe,loading:Ce,sourceBalance:he,sourceBorrowAPY:i===d.tk.Variable?r.variableBorrowAPY:r.stableBorrowAPY,targetBorrowAPY:me.reserve.variableBorrowAPY,showAPYTypeChange:i===d.tk.Stable||"GHO"===t.reserve.symbol||"GHO"===me.reserve.symbol,ghoData:He,currentMarket:I})}),Z&&(0,k.jsx)(te.f,{txError:Z}),Ne&&(0,k.jsx)(U.v,{severity:"error",sx:{mt:4},children:(0,k.jsx)(h.Z,{variant:"caption",children:(0,k.jsx)(o.cC,{id:"Insufficient collateral to cover new borrow position. Wallet must have borrowing power remaining to perform debt switch."})})}),(0,k.jsx)(be,{isMaxSelected:ye,poolReserve:r,amountToSwap:Se,amountToReceive:Ve,isWrongNetwork:n,targetReserve:me.reserve,symbol:r.symbol,blocked:void 0!==Ue||""!==ke||Ne,loading:Pe,buildTxFn:Ze,currentRateMode:i===d.tk.Variable?2:1})]})},Te=function(){return(0,k.jsx)(C,{sx:function(e){return{borderBottom:"1px solid ".concat(e.palette.divider),mt:-1}},children:(0,k.jsxs)(b.Z,{direction:"row",sx:{py:4},gap:14,children:[(0,k.jsx)(h.Z,{variant:"subheader2",children:(0,k.jsx)(o.cC,{id:"Select an asset"})}),(0,k.jsx)(h.Z,{variant:"subheader2",children:(0,k.jsx)(o.cC,{id:"Borrow APY"})})]})})},Oe=function(e){var r=e.asset;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.T1,{aToken:r.aToken,symbol:r.iconSymbol||r.symbol,sx:{fontSize:"22px",mr:1}}),(0,k.jsx)(I.Z,{sx:{mr:6},children:r.symbol}),(0,k.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"end"},children:[(0,k.jsx)(F.B,{value:r.variableApy,percent:!0,variant:"main14",color:"text.secondary"}),(0,k.jsx)(h.Z,{variant:"helperText",color:"text.secondary",children:(0,k.jsx)(o.cC,{id:"Variable rate"})})]})]})},Be=function(e){var r,t=e.ghoApyRange,n=e.asset,a=e.userBorrowApyAfterMaxSwitch,i=e.userDiscountTokenBalance,s=e.currentMarket,c=e.qualifiesForDiscount;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.T1,{aToken:n.aToken,symbol:n.iconSymbol||n.symbol,sx:{fontSize:"22px",mr:1}}),(0,k.jsx)(I.Z,{sx:{mr:6},children:n.symbol}),(0,k.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"end"},children:[(0,k.jsx)(R.B,{useApyRange:c,rangeValues:t,variant:"main14",color:"text.secondary",value:null!==a&&void 0!==a?a:-1,"data-cy":"apyType",stkAaveBalance:i,ghoRoute:Y.Z6.reserveOverview(null!==(r=null===n||void 0===n?void 0:n.address)&&void 0!==r?r:"",s)+"/#discount",forceShowTooltip:!0,withTokenIcon:c,userQualifiesForDiscount:c}),(0,k.jsx)(h.Z,{variant:"helperText",color:"text.secondary",children:(0,k.jsx)(o.cC,{id:"Fixed rate"})})]})]})};function ke(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Pe(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ke(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ke(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Ze=function(){var e=(0,c.vR)(),r=e.type,t=e.close,n=e.args;return(0,k.jsx)(i.P,{open:r===c.w8.DebtSwitch,setOpen:t,children:(0,k.jsx)(l.A,{title:(0,k.jsx)(o.cC,{id:"Switch borrow position"}),underlyingAsset:n.underlyingAsset,hideTitleSymbol:!0,children:function(e){return(0,k.jsx)(s.X,{children:function(r){return(0,k.jsx)(De,Pe(Pe({},e),{},{currentRateMode:n.currentRateMode,user:r}))}})}})})}},99730:function(e,r,t){t.d(r,{f:function(){return l}});var n=t(49501),o=t(30120),a=t(29630),i=t(69331),s=t(67916),c=t(85893),l=function(e){var r=e.txError;return(0,c.jsxs)(o.Z,{children:[(0,c.jsx)(s.Q,{txError:r}),"MetaMask Message Signature: User denied message signature."!==r.rawError.message&&"MetaMask Tx Signature: User denied transaction signature."!==r.rawError.message&&(0,c.jsx)(o.Z,{sx:{pt:4},children:(0,c.jsx)(i.v,{severity:"info",children:(0,c.jsxs)(a.Z,{variant:"description",children:[" ",(0,c.jsx)(n.cC,{id:"Tip: Try increasing slippage or reduce input amount"})]})})})]})}},59286:function(e,r,t){t.d(r,{nG:function(){return c},BC:function(){return l},hF:function(){return u}});var n=t(75331),o=t(1279),a=t(70794),i=t(21046),s=t(87385);function c(e,r,t){var c,l,u,d,p=e.availableLiquidityUSD,x=a.Z.min(r.availableBorrowsUSD,p),m="0"===e.borrowCap?(0,o.hE)(i.Bz.toString()):(0,o.hE)(Number(e.borrowCap)).minus((0,o.hE)(e.totalDebt)),v=a.Z.max(a.Z.min(e.formattedAvailableLiquidity,m),0),b=(0,o.hE)((null===r||void 0===r?void 0:r.availableBorrowsMarketReferenceCurrency)||0).div(e.formattedPriceInMarketReferenceCurrency),h=a.Z.min(b,v);t===n.tk.Stable&&(h=a.Z.min(h,(0,o.hE)(e.formattedAvailableLiquidity).multipliedBy(.25)));var y=h.gte(b)||"0"!==r.totalBorrowsMarketReferenceCurrency&&x.lt(p)||x.eq(p)&&"0"!==e.totalDebt||e.borrowCapUSD&&"0"!==e.totalDebt&&x.gte(p)||r.isInIsolationMode&&"0"!==(null===(c=r.isolatedReserve)||void 0===c?void 0:c.isolationModeTotalDebt)&&(0,o.hE)((null===(l=r.isolatedReserve)||void 0===l?void 0:l.debtCeiling)||"0").minus((null===(u=r.isolatedReserve)||void 0===u?void 0:u.isolationModeTotalDebt)||"0").shiftedBy(-((null===(d=r.isolatedReserve)||void 0===d?void 0:d.debtCeilingDecimals)||0)).multipliedBy("0.99").lt(r.availableBorrowsUSD)?h.multipliedBy("0.99"):h;return(0,s.$w)(y.toString(10),e.decimals)}function l(e,r){var t,n,c,l,u=(0,o.hE)((null===e||void 0===e?void 0:e.availableBorrowsMarketReferenceCurrency)||0),d="0"===r.borrowCap?(0,o.hE)(i.Bz.toString()):(0,o.hE)(Number(r.borrowCap)).minus((0,o.hE)(r.totalDebt)),p=a.Z.max(a.Z.min(u,d),0),x="0"!==e.totalBorrowsMarketReferenceCurrency||r.borrowCapUSD&&"0"!==r.totalDebt&&p.gte(d)||e.isInIsolationMode&&"0"!==(null===(t=e.isolatedReserve)||void 0===t?void 0:t.isolationModeTotalDebt)&&(0,o.hE)((null===(n=e.isolatedReserve)||void 0===n?void 0:n.debtCeiling)||"0").minus((null===(c=e.isolatedReserve)||void 0===c?void 0:c.isolationModeTotalDebt)||"0").shiftedBy(-((null===(l=e.isolatedReserve)||void 0===l?void 0:l.debtCeilingDecimals)||0)).multipliedBy("0.99").lt(e.availableBorrowsUSD)?p.multipliedBy("0.99"):p;return(0,s.$w)(x.toString(10),18)}function u(e,r){var t=e.borrowingEnabled,n=e.isActive,o=e.borrowableInIsolation,a=e.eModeCategoryId,i=e.isFrozen,s=e.isPaused;return!(!t||!n||i||s)&&((null===r||void 0===r||!r.isInEmode||a===r.userEmodeCategoryId)&&!(null!==r&&void 0!==r&&r.isInIsolationMode&&!o))}},52358:function(e,r,t){var n=t(67294);const o=n.forwardRef((function(e,r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:r},e),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 14l-7 7m0 0l-7-7m7 7V3"}))}));r.Z=o},10822:function(e,r,t){var n=t(67294);const o=n.forwardRef((function(e,r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:r},e),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"}))}));r.Z=o}}]);
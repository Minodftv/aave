"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7604],{76920:function(e,r,t){var n,i,o=t(67294);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s.apply(this,arguments)}r.Z=function(e){return o.createElement("svg",s({viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.78.628a.6.6 0 0 1 .42.572v3h2.4a.6.6 0 0 1 .492.944l-4.2 6A.6.6 0 0 1 4.8 10.8v-3H2.4a.6.6 0 0 1-.492-.944l4.2-6A.6.6 0 0 1 6.78.628Z",fill:"url(#lightningBoltGradient_svg__a)"})),i||(i=o.createElement("defs",null,o.createElement("linearGradient",{id:"lightningBoltGradient_svg__a",x1:10.2,y1:4.672,x2:1.345,y2:7.335,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#B6509E"}),o.createElement("stop",{offset:1,stopColor:"#2EBAC6"})))))}},96875:function(e,r,t){t.d(r,{o:function(){return v}});var n=t(59499),i=t(4730),o=t(49501),s=t(1279),a=t(62097),c=t(30120),l=t(29630),d=t(75084),u=t(70794),x=t(41024),m=t(85893),h=["value","onInfoClick","HALIntegrationComponent"];function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function j(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var v=function(e){var r=e.value,t=e.onInfoClick,n=e.HALIntegrationComponent,p=(0,i.Z)(e,h),v=(0,a.Z)().palette,f=Number((0,s.hE)(r).toFixed(2,u.Z.ROUND_DOWN)),g="";return g=f>=3?v.success.main:f<1.1?v.error.main:v.warning.main,(0,m.jsxs)(c.Z,{sx:{display:"inline-flex",alignItems:{xs:"flex-start",xsm:"center"},flexDirection:{xs:"column",xsm:"row"}},"data-cy":"HealthFactorTopPannel",children:["-1"===r?(0,m.jsx)(l.Z,{variant:"secondary14",color:v.success.main,children:"\u221e"}):(0,m.jsx)(x.B,j({value:f,sx:j({color:g},p.sx),visibleDecimals:2,compact:!0},p)),t&&(0,m.jsx)(d.Z,{onClick:t,variant:"surface",size:"small",sx:{minWidth:"unset",ml:{xs:0,xsm:2}},children:(0,m.jsx)(o.cC,{id:"Risk details"})}),n&&(0,m.jsx)(c.Z,{ml:{xs:0,xsm:2},mt:{xs:1,xsm:0},children:n})]})}},60008:function(e,r,t){t.d(r,{Fy:function(){return V},_h:function(){return i}});var n,i,o=t(49501),s=t(48949),a=t(80227),c=t(29630),l=t(81645),d=t(68346),u=t(30120),x=t(67294),m=t(41024),h=t(92391),p=t(69331),j=t(73965),v=t(43478),f=t(8195),g=t(46930),b=t(77537),E=t(63206),y=t(76920),I=t(63491),O=t(67916),C=t(93608),w=t(57824),S=t(78944),Z=t(10343),N=t(50029),k=t(87794),D=t.n(k),T=t(75331),A=t(89291),_=t(50597),M=t(67489),P=t(32667),F=t(85893),L=function(e){var r=e.isWrongNetwork,t=e.blocked,n=e.selectedEmode,i=e.activeEmode,s=e.eModes,a=(0,_.Y)((function(e){return e.setUserEMode})),c=(0,A.Q)({tryPermit:!1,handleGetTxns:function(){var e=(0,N.Z)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(n));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),skip:t,deps:[n],protocolAction:T.UQ.setEModeUsage,eventTxInfo:{previousState:(0,P.U)(s[i].label),newState:(0,P.U)(s[n].label)}}),l=c.action,d=c.loadingTxns,u=c.mainTxState,x=c.requiresApproval;return(0,F.jsx)(M.B,{requiresApproval:x,blocked:t,mainTxState:u,preparingTransactions:d,handleAction:l,actionText:0===i?(0,F.jsx)(o.cC,{id:"Enable E-Mode"}):0!==n?(0,F.jsx)(o.cC,{id:"Switch E-Mode"}):(0,F.jsx)(o.cC,{id:"Disable E-Mode"}),actionInProgressText:0===i?(0,F.jsx)(o.cC,{id:"Enabling E-Mode"}):0!==n?(0,F.jsx)(o.cC,{id:"Switching E-Mode"}):(0,F.jsx)(o.cC,{id:"Disabling E-Mode"}),isWrongNetwork:r})},B=t(47546),R=t(55343),U=t(31538),W=t(46541),H=function(e){var r=e.emodeCategories,t=e.selectedEmode,n=e.setSelectedEmode,i=e.userEmode;return(0,F.jsxs)(R.Z,{sx:{mb:1,width:"100%"},children:[(0,F.jsx)(B.Z,{sx:{mb:1,color:"text.secondary"},children:(0,F.jsx)(o.cC,{id:"Asset category"})}),(0,F.jsx)(W.Z,{defaultValue:0,value:t,onChange:function(e){n(r[Number(e.target.value)])},className:"EmodeSelect","data-cy":"EmodeSelect",sx:{width:"100%",height:"44px",borderRadius:"6px",borderColor:"divider",outline:"none !important",color:"text.primary",".MuiOutlinedInput-input":{backgroundColor:"transparent"},".MuiOutlinedInput-notchedOutline, .MuiOutlinedInput-notchedOutline":{borderColor:"divider",outline:"none !important",borderWidth:"1px"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"divider",borderWidth:"1px"},"&.EmodeSelect .MuiSelect-icon":{color:"text.primary"}},native:!1,renderValue:function(e){return 0!==e?(0,F.jsx)(c.Z,{color:"text.primary",children:(0,P.U)(r[e].label)}):(0,F.jsx)(c.Z,{color:"text.muted",children:(0,F.jsx)(o.cC,{id:"Select"})})},children:Object.keys(r).map((function(e){if(i!==Number(e)&&0!==Number(e))return(0,F.jsx)(U.Z,{value:r[Number(e)].id,children:(0,F.jsx)(c.Z,{color:"text.primary",children:(0,P.U)(r[Number(e)].label)})},"emode-".concat(r[Number(e)].id))}))})]})};!function(e){e[e.EMODE_DISABLED_LIQUIDATION=0]="EMODE_DISABLED_LIQUIDATION",e[e.CLOSE_POSITIONS_BEFORE_SWITCHING=1]="CLOSE_POSITIONS_BEFORE_SWITCHING"}(n||(n={})),function(e){e.ENABLE="Enable",e.DISABLE="Disable",e.SWITCH="Switch"}(i||(i={}));var V=function(e){var r=e.mode,t=e.user,N=(0,j.HT)(),k=N.reserves,D=N.eModes,T=N.marketReferenceCurrencyDecimals,A=N.marketReferencePriceInUsd,_=N.userReserves,M=(0,g.f)().currentChainId,B=(0,b.Z)(),R=B.chainId,U=B.readOnlyModeAddress,W=(0,v.p)(1),V=(0,f.vR)(),G=V.gasLimit,Q=V.mainTxState,q=V.txError,z=(0,x.useState)(function(e,r,t){var n=Object.keys(r).length;if(e===i.ENABLE){if(n>2)return;return r[1]}if(e===i.SWITCH){if(n>3)return;return 1===t?r[2]:r[1]}return r[0]}(r,D,t.userEmodeCategoryId)),X=z[0],Y=z[1],K=(0,E.Mo)(M),J=(0,s.G)({currentTimestamp:W,userReserves:_,formattedReserves:k,userEmodeCategoryId:X?X.id:0,marketReferenceCurrencyDecimals:T,marketReferencePriceInUsd:A}),$=void 0;if(t.isInEmode&&0===(null===X||void 0===X?void 0:X.id))Number(J.healthFactor)<1.01&&"-1"!==J.healthFactor&&($=n.EMODE_DISABLED_LIQUIDATION);else if(X&&t.userEmodeCategoryId!==(null===X||void 0===X?void 0:X.id)){t.userReservesData.some((function(e){return(Number(e.scaledVariableDebt)>0||Number(e.principalStableDebt)>0)&&e.reserve.eModeCategoryId!==(null===X||void 0===X?void 0:X.id)}))&&($=n.CLOSE_POSITIONS_BEFORE_SWITCHING)}var ee=function(){switch($){case n.CLOSE_POSITIONS_BEFORE_SWITCHING:return(0,F.jsx)(p.v,{severity:"info",sx:{mt:6,alignItems:"center"},children:(0,F.jsx)(c.Z,{variant:"caption",children:(0,F.jsx)(o.cC,{id:"To enable E-mode for the {0} category, all borrow positions outside of this category must be closed.",values:{0:X&&(0,P.U)(X.label)}})})});case n.EMODE_DISABLED_LIQUIDATION:return(0,F.jsxs)(p.v,{severity:"error",sx:{mt:6,alignItems:"center"},children:[(0,F.jsx)(c.Z,{variant:"subheader1",color:"#4F1919",children:(0,F.jsx)(o.cC,{id:"Cannot disable E-Mode"})}),(0,F.jsx)(c.Z,{variant:"caption",children:(0,F.jsx)(o.cC,{id:"You can not disable E-Mode as your current collateralization level is above 80%, disabling E-Mode can cause liquidation. To exit E-Mode supply or repay borrowed positions."})})]});default:return null}},re=Object.keys(D).length>=3&&r===i.ENABLE||Object.keys(D).length>=4&&r===i.SWITCH,te=M!==R,ne=function(){return(0,F.jsx)(l.Z,{color:"primary",sx:{fontSize:"14px",mx:1},children:(0,F.jsx)(a.Z,{})})},ie=!!X&&0===X.id&&void 0===$&&Number(J.healthFactor).toFixed(3)<Number(t.healthFactor).toFixed(3),oe="0"!==t.currentLoanToValue&&Number(J.currentLoanToValue).toFixed(3)!=Number(t.currentLoanToValue).toFixed(3);return q&&q.blocking?(0,F.jsx)(I.D,{txError:q}):Q.success?(0,F.jsx)(C.R,{action:(0,F.jsx)(o.cC,{id:"Emode"})}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(S.E,{title:"".concat(r," E-Mode")}),te&&!U&&(0,F.jsx)(Z.I,{networkName:K.name,chainId:M}),0===t.userEmodeCategoryId&&(0,F.jsx)(p.v,{severity:"warning",children:(0,F.jsx)(c.Z,{variant:"caption",children:(0,F.jsx)(o.cC,{id:"Enabling E-Mode only allows you to borrow assets belonging to the selected category. Please visit our <0>FAQ guide</0> to learn more about how it works and the applied restrictions.",components:{0:(0,F.jsx)(d.Z,{href:"https://docs.aave.com/faq/aave-v3-features#high-efficiency-mode-e-mode",target:"_blank",rel:"noopener"})}})})}),re&&(0,F.jsx)(H,{emodeCategories:D,selectedEmode:null===X||void 0===X?void 0:X.id,setSelectedEmode:Y,userEmode:t.userEmodeCategoryId}),$===n.EMODE_DISABLED_LIQUIDATION&&(0,F.jsx)(ee,{}),ie&&(0,F.jsxs)(p.v,{severity:"error",sx:{mt:6,alignItems:"center"},children:[(0,F.jsx)(c.Z,{variant:"subheader1",color:"#4F1919",children:(0,F.jsx)(o.cC,{id:"Liquidation risk"})}),(0,F.jsx)(c.Z,{variant:"caption",children:(0,F.jsx)(o.cC,{id:"This action will reduce your health factor. Please be mindful of the increased risk of collateral liquidation."})})]}),(0,F.jsxs)(w.m6,{gasLimit:G,children:[!re&&(0,F.jsx)(h.X,{caption:(0,F.jsx)(o.cC,{id:"E-Mode category"}),captionVariant:"description",mb:4,children:(0,F.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"right",alignItems:"center"},children:[(0,F.jsx)(u.Z,{sx:{display:"inline-flex",alignItems:"center",mx:1},children:0!==t.userEmodeCategoryId?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(l.Z,{sx:{fontSize:"12px"},children:(0,F.jsx)(y.Z,{})}),(0,F.jsx)(c.Z,{variant:"subheader1",children:(0,P.U)(D[t.userEmodeCategoryId].label)})]}):(0,F.jsx)(c.Z,{variant:"subheader1",children:(0,F.jsx)(o.cC,{id:"None"})})}),X&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(ne,{}),(0,F.jsx)(u.Z,{sx:{display:"inline-flex",alignItems:"center"},children:0!==X.id?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(l.Z,{sx:{fontSize:"12px",mr:.5},children:(0,F.jsx)(y.Z,{})}),(0,F.jsx)(c.Z,{variant:"subheader1",children:(0,P.U)(D[X.id].label)})]}):(0,F.jsx)(c.Z,{variant:"subheader1",children:(0,F.jsx)(o.cC,{id:"None"})})})]})]})}),(0,F.jsx)(h.X,{caption:(0,F.jsx)(o.cC,{id:"Available assets"}),captionVariant:"description",mb:4,sx:{alignContent:"flex-end"},children:(0,F.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"right",alignItems:"center"},children:[D[t.userEmodeCategoryId]&&(0,F.jsx)(u.Z,{sx:{display:"flex",alignItems:"center",textAlign:"end"},children:0!==t.userEmodeCategoryId?(0,F.jsx)(c.Z,{sx:{textAlign:"end"},children:D[t.userEmodeCategoryId].assets.join(", ")}):(0,F.jsx)(c.Z,{children:(0,F.jsx)(o.cC,{id:"All Assets"})})}),X&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(ne,{}),(0,F.jsx)(u.Z,{sx:{display:"flex",alignItems:"center",textAlign:"end"},children:0!==(null===X||void 0===X?void 0:X.id)?(0,F.jsx)(c.Z,{sx:{textAlign:"end"},children:X.assets.join(", ")}):(0,F.jsx)(c.Z,{children:(0,F.jsx)(o.cC,{id:"All Assets"})})})]})]})}),(0,F.jsx)(w.jz,{visibleHfChange:!!X,healthFactor:t.healthFactor,futureHealthFactor:J.healthFactor}),oe&&(0,F.jsx)(h.X,{caption:(0,F.jsx)(o.cC,{id:"Maximum loan to value"}),captionVariant:"description",mb:4,align:"flex-start",children:(0,F.jsx)(u.Z,{sx:{textAlign:"right"},children:(0,F.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,F.jsx)(m.B,{value:t.currentLoanToValue,sx:{color:"text.primary"},visibleDecimals:2,compact:!0,percent:!0,variant:"secondary14"}),void 0!==X&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(ne,{}),(0,F.jsx)(m.B,{value:J.currentLoanToValue,sx:{color:"text.primary"},visibleDecimals:2,compact:!0,percent:!0,variant:"secondary14"})]})]})})})]}),$===n.CLOSE_POSITIONS_BEFORE_SWITCHING&&(0,F.jsx)(ee,{}),q&&(0,F.jsx)(O.Q,{txError:q}),(0,F.jsx)(L,{isWrongNetwork:te,blocked:void 0!==$||!X,selectedEmode:(null===X||void 0===X?void 0:X.id)||0,activeEmode:t.userEmodeCategoryId,eModes:D})]})}},32667:function(e,r,t){t.d(r,{U:function(){return n}});var n=function(e){return""===e?"Disabled":e}},67916:function(e,r,t){t.d(r,{Q:function(){return c}});var n=t(49501),i=t(29630),o=t(75084),s=t(69331),a=t(85893),c=function(e){var r=e.txError;return(0,a.jsx)(s.v,{severity:"error",sx:{mt:4,mb:0},children:(0,a.jsx)(i.Z,{variant:"description",children:r.error?(0,a.jsxs)(a.Fragment,{children:[r.error," ",(0,a.jsx)(o.Z,{sx:{verticalAlign:"top"},variant:"text",onClick:function(){return navigator.clipboard.writeText(r.rawError.message.toString())},children:(0,a.jsx)(i.Z,{variant:"description",children:(0,a.jsx)(n.cC,{id:"copy the error"})})})]}):(0,a.jsx)(n.cC,{id:"There was some error. Please try changing the parameters or <0><1>copy the error</1></0>",components:{0:(0,a.jsx)(o.Z,{sx:{verticalAlign:"top"},onClick:function(){return navigator.clipboard.writeText(r.rawError.message.toString())}}),1:(0,a.jsx)(i.Z,{variant:"description"})}})})})}},10343:function(e,r,t){t.d(r,{I:function(){return h}});var n=t(59499),i=t(49501),o=t(29630),s=t(75084),a=t(77537),c=t(50597),l=t(57609),d=t(69331),u=t(85893);function x(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?x(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var h=function(e){var r=e.networkName,t=e.chainId,n=e.event,x=e.funnel,h=(0,a.Z)(),p=h.switchNetwork,j=h.switchNetworkError,v=(0,c.Y)((function(e){return e.trackEvent}));return(0,u.jsx)(d.v,{severity:"error",icon:!1,children:j?(0,u.jsx)(o.Z,{children:(0,u.jsx)(i.cC,{id:"Seems like we can't switch the network automatically. Please check if you can change it from the wallet."})}):(0,u.jsxs)(o.Z,{variant:"description",children:[(0,u.jsx)(i.cC,{id:"Please switch to {networkName}.",values:{networkName:r}})," ",(0,u.jsx)(s.Z,{variant:"text",sx:{ml:"2px",verticalAlign:"top"},onClick:function(){v(l.vh.SWITCH_NETWORK,m(m({funnel:x},null===n||void 0===n?void 0:n.eventParams),{},{network:r})),p(t)},disableRipple:!0,children:(0,u.jsx)(o.Z,{variant:"description",children:(0,u.jsx)(i.cC,{id:"Switch Network"})})})]})})}},43478:function(e,r,t){t.d(r,{p:function(){return s}});var n=t(27484),i=t.n(n),o=t(67294);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,r=(0,o.useState)(0),t=r[0],n=r[1],s=(0,o.useState)(0),a=s[0],c=s[1];return(0,o.useEffect)((function(){var r=setInterval((function(){return c(i()().unix()+t)}),1e3*e);return function(){return clearInterval(r)}}),[e,t]),(0,o.useEffect)((function(){var e=Number(localStorage.getItem("forkTimeAhead")||0);n(e),c(i()().unix()+e)}),[]),a}}}]);